/*! cropper 2013-04-27 */
function require(t,e,i){var r=require.resolve(t);if(null==r){i=i||t,e=e||"root";var n=Error('Failed to require "'+i+'" from "'+e+'"');throw n.path=i,n.parent=e,n.require=!0,n}var o=require.modules[r];return o.exports||(o.exports={},o.client=o.component=!0,o.call(this,o.exports,require.relative(r),o)),o.exports}require.modules={},require.aliases={},require.resolve=function(t){"/"===t.charAt(0)&&(t=t.slice(1));for(var e=t+"/index.js",i=[t,t+".js",t+".json",t+"/index.js",t+"/index.json"],r=0;i.length>r;r++){var t=i[r];if(require.modules.hasOwnProperty(t))return t}return require.aliases.hasOwnProperty(e)?require.aliases[e]:void 0},require.normalize=function(t,e){var i=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var r=0;e.length>r;++r)".."==e[r]?t.pop():"."!=e[r]&&""!=e[r]&&i.push(e[r]);return t.concat(i).join("/")},require.register=function(t,e){require.modules[t]=e},require.alias=function(t,e){if(!require.modules.hasOwnProperty(t))throw Error('Failed to alias "'+t+'", it does not exist');require.aliases[e]=t},require.relative=function(t){function e(t,e){for(var i=t.length;i--;)if(t[i]===e)return i;return-1}function i(e){var r=i.resolve(e);return require(r,t,e)}var r=require.normalize(t,"..");return i.resolve=function(i){var n=i.charAt(0);if("/"==n)return i.slice(1);if("."==n)return require.normalize(r,i);var o=t.split("/"),s=e(o,"deps")+1;return s||(s=0),i=o.slice(0,s+1).join("/")+"/deps/"+i},i.exists=function(t){return require.modules.hasOwnProperty(i.resolve(t))},i},require.register("component-indexof/index.js",function(t,e,i){var r=[].indexOf;i.exports=function(t,e){if(r)return t.indexOf(e);for(var i=0;t.length>i;++i)if(t[i]===e)return i;return-1}}),require.register("component-emitter/index.js",function(t,e,i){function r(t){return t?n(t):void 0}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}var o=e("indexof");i.exports=r,r.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},e._off=i,this.on(t,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;var r=o(i,e._off||e);return~r&&i.splice(r,1),this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var r=0,n=i.length;n>r;++r)i[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),require.register("component-bind/index.js",function(t,e,i){var r=[].slice;i.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw Error("bind() requires a function");var i=[].slice.call(arguments,2);return function(){return e.apply(t,i.concat(r.call(arguments)))}}}),require.register("cropper/index.js",function(t,e,i){"use strict";i.exports=e("./lib/Cropper")}),require.register("cropper/lib/Cropper.js",function(t,e,i){"use strict";function r(t,e){e=this._defaultOptions(e||{}),this.img=t,this.cropPane=new n(e),this.canvas=new o(t),s(this),this._init()}var n=e("./CropPane.js"),o=e("./ImageCanvas.js"),s=e("emitter"),a=e("bind");i.exports=r,r.prototype={_defaultOptions:function(t){var e={ratio:"none",minWidth:20,minHeight:20,defaultWidth:100,defaultHeight:100},i=t;for(var r in e)!e.hasOwnProperty(r)||r in i||(i[r]=e[r]);return i},_init:function(){this.canvas.draw(),this.cropPane.on("change",a(this,this._cropChange)),this.cropPane.draw(this.img)},_cropChange:function(t){this._croppedPosition=t,this.emit("change",t),this.canvas.drawMask(t)},get:function(t){return this.canvas.toDataUrl(this._croppedPosition,t)},setRatio:function(t){this.cropPane.setRatio(t),this.cropPane.refresh()},destroy:function(){this.canvas.destroy(),this.cropPane.destroy(),this.canvas=this.cropPane=null}}}),require.register("cropper/lib/CropPane.js",function(t,e,i){"use strict";function r(t){this.options=t,this.setRatio(this.options.ratio),h(this),a(this)}var n=e("./Resizer"),o=e("./Position"),s=e("./DOMTools"),a=e("./Draggable"),h=e("emitter"),u=e("bind");i.exports=r,r.prototype={draw:function(t){this.el||this._createPane(t)},moveTo:function(t,e){var i={};"number"==typeof t&&(i.left=t+"px"),"number"==typeof e&&(i.top=e+"px"),this.refresh(i)},setRatio:function(t){if(t=(""+t).toLowerCase(),"none"===t||"square"===t)this.ratio=t;else{if(!/^\d{1,2}:\d{1,2}$/.test(t))throw new TypeError("Don't know what to do with "+t);var e=t.split(":");this.ratio=parseInt(e[0],10)/parseInt(e[1],10)}},onDrag:function(t,e){var i,r;t&&(i=parseFloat(this.el.style.left)+t),e&&(r=parseFloat(this.el.style.top)+e),this.moveTo(i,r)},refresh:function(t){this._performTransform(t),this.emit("change",o.relative(this.el))},destroy:function(){s.remove(this.parentBounds),s.remove(this.el),this.parentBounds=this.el=null},_keepInBounds:function(t,e,i){return t=parseFloat(t),t=Math.max(t,i||0),t=Math.min(t,e||Number.MAX_VALUE)},_enforceRatio:function(t){var e,i=t?parseFloat(t.width):o.relative(this.el).width,r=this.ratio;return"square"===r?e=i:"number"==typeof r&&(e=i/r),e&&(t||(t={}),t.height=e+"px"),t},_enforceBounds:function(t){var e,i,r=o.relative(this.el),n={left:{parent:"width",self:"width"},width:{parent:"width",self:"x"},top:{parent:"height",self:"height"},height:{parent:"height",self:"y"}};for(e in n)n.hasOwnProperty(e)&&e in t&&(i=n[e],t[e]=this._keepInBounds(t[e],s[i.parent](this.parentBounds)-r[i.self])+"px");return t},_enforceSize:function(t){return"width"in t&&(t.width=this._keepInBounds(t.width,this.options.maxWidth,this.options.minWidth)+"px"),"height"in t&&(t.height=this._keepInBounds(t.height,this.options.maxHeight,this.options.minHeight)+"px"),t},_performTransform:function(t){t=this._enforceRatio(t),t&&(t=this._enforceBounds(t),t=this._enforceSize(t),s.setStyles(this.el,t))},_createPane:function(t){this.parentBounds=this._createBounds(t);var e=o.relative(this.parentBounds),i=document.createElement("div");i.className="cropper-crop-pane",this.el=this.parentBounds.appendChild(i),this._performTransform({position:"absolute",height:this.options.defaultHeight+"px",width:this.options.defaultWidth+"px",top:.4*e.height+"px",left:.4*e.width+"px"}),this.makeDraggable(i,this.parentBounds),this._addResizers(i),this.refresh()},_addResizers:function(t){for(var e,i=0,r=["ne","se","nw","sw"],o=r.length;o>i;i++)e=new n(r[i],this.parentBounds),e.on("move",u(this,this._onResize)),t.appendChild(e.el)},_onResize:function(t,e,i){var r=o.relative(this.el),n=this._bounds[t],s={};for(var a in n)n.hasOwnProperty(a)&&(s[a]=this._bounds[a](r,e,i,n[a]));this.refresh(s)},_bounds:{ne:{width:1,top:1,height:-1},se:{height:1,width:1},nw:{top:1,height:-1,left:1,width:-1},sw:{height:1,left:1,width:-1},width:function(t,e,i,r){return t.width+e*r+"px"},height:function(t,e,i,r){return t.height+i*r+"px"},top:function(t,e,i,r){return t.y+i*r+"px"},left:function(t,e,i,r){return t.x+e*r+"px"}},_createBounds:function(t){var e=document.createElement("div");return s.setStyles(e,{position:"absolute",zIndex:101}),s.keepSnapped(e,t),t.parentNode.insertBefore(e,t)}}}),require.register("cropper/lib/Position.js",function(t,e,i){"use strict";i.exports={relative:function(t){var e=window.getComputedStyle(t);return{x:t.offsetLeft,y:t.offsetTop,width:parseFloat(e.getPropertyValue("width")),height:parseFloat(e.getPropertyValue("height"))}},absolute:function(t){for(var e=t.offsetLeft,i=t.offsetTop,r=t.offsetParent;r;)e+=r.offsetLeft,i+=r.offsetTop,r=r.offsetParent;return{x:e,y:i}}}}),require.register("cropper/lib/Resizer.js",function(t,e,i){"use strict";function r(t,e){this.name=t,n(this),o(this),this._init(e)}var n=(e("bind"),e("emitter")),o=e("./Draggable");i.exports=r,r.prototype={_init:function(t){this.el=document.createElement("div"),this.el.className="cropper-sizer cropper-sizer-"+this.name,this.makeDraggable(this.el,t)},onDrag:function(t,e){this.emit("move",this.name,t,e)}}}),require.register("cropper/lib/DOMTools.js",function(t,e,i){"use strict";function r(t,e){var i=window.getComputedStyle(t);return i.getPropertyValue(e)}var n=e("./Position"),o=i.exports.setStyles=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i]);return t},s=i.exports.snap=function(t,e){var i=n.relative(e);o(t,{height:i.height+"px",width:i.width+"px",top:i.y+"px",left:i.x+"px"})};i.exports.keepSnapped=function(t,e){s(t,e),setInterval(function(){s(t,e)},200)},i.exports.remove=function(t){return t.parentNode.removeChild(t)},i.exports.width=function(t){return parseFloat(r(t,"width"))},i.exports.height=function(t){return parseFloat(r(t,"height"))}}),require.register("cropper/lib/ImageCanvas.js",function(t,e,i){"use strict";function r(t,e){this.img=t,this.options=e,this._create(t)}var n=(e("emitter"),e("./DOMTools")),o=e("./Position");i.exports=r,r.prototype={draw:function(){return this.ctx.drawImage(this.img,0,0),this},unmask:function(){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this},drawMask:function(t){return this.unmask().draw(),this.ctx.fillStyle="rgba(0, 0, 0, .5)",this.ctx.fillRect(0,0,t.x,this.canvas.height),this.ctx.fillRect(t.x,0,t.width,t.y),this.ctx.fillRect(t.x,t.height+t.y,t.width,this.canvas.height),this.ctx.fillRect(t.width+t.x,0,this.canvas.width,this.canvas.height),this},toDataUrl:function(t,e){var i=document.createElement("canvas");return i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(this.canvas,t.x,t.y,t.width,t.height,0,0,t.width,t.height),i.toDataURL(e||"image/png")},destroy:function(){return n.remove(this.canvas),this.ctx=this.canvas=null,this},_create:function(t){var e=o.relative(t),i=n.setStyles(document.createElement("canvas"),{position:"absolute",zIndex:100,top:e.y+"px",left:e.x+"px"});i.height=e.height,i.width=e.width,i.className="cropper-canvas",n.keepSnapped(i,t),this.ctx=i.getContext("2d"),this.canvas=t.parentNode.insertBefore(i,t)}}}),require.register("cropper/lib/Draggable.js",function(t,e,i){"use strict";function r(t){for(var e in s.prototype)"onDrag"===e&&e in t||(t[e]=s.prototype[e]);return t}function n(t,e){var i=document.documentElement;return{x:t+i.scrollLeft,y:e+i.scrollTop}}function o(t,e,i){for(var r in e)e.hasOwnProperty(r)&&t.addEventListener(r,a(i,e[r]))}function s(t){return t?r(t):void 0}i.exports=s;var a=e("bind");s.prototype={makeDraggable:function(t,e){o(t,{mouseup:this.onMouseUp,mousedown:this.onMouseDown},this),o(e,{mouseup:this.onMouseUp,mouseout:this.onMouseOut,mousemove:this.onMouseMove},this)},onMouseOut:function(t){var e=n(t.clientX,t.clientY),i=t.currentTarget.getBoundingClientRect();e.x<=i.left||e.x>=i.right||e.y<=i.top||e.y>=i.bottom?this.onMouseUp(t):t.stopPropagation()},onMouseUp:function(t){this._dragging=!1,t.preventDefault()},onMouseDown:function(t){return 0!==t.button?this.onMouseUp(t):(this._dragging=!0,this.lastMouse=n(t.clientX,t.clientY),t.stopPropagation(),t.preventDefault(),void 0)},onMouseMove:function(t){if(this._dragging){t.preventDefault();var e=n(t.clientX,t.clientY),i=e.x-this.lastMouse.x,r=e.y-this.lastMouse.y;this.lastMouse=e,this.onDrag(i,r)}},onDrag:function(t,e){console.log("Hook method called onDrag should be implemented"),console.log(t+", "+e)}}}),require.alias("component-emitter/index.js","cropper/deps/emitter/index.js"),require.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),require.alias("component-bind/index.js","cropper/deps/bind/index.js");